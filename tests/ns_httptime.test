#
# $Header$
#

package require tcltest 2.2
namespace import -force ::tcltest::*

eval ::tcltest::configure $argv

if {[ns_httptime 0] eq "Thu, 01 Jan 1970 00:00:00 GMT"} {
    testConstraint correctLocale true
}

test ns_httptime-1.1 {basic syntax: plain call} -body {
     ns_httptime
} -constraints correctLocale -returnCodes error -result {wrong # args: should be "ns_httptime time"}

test ns_httptime-1.2 {basic syntax: wrong arg type} -body {
     ns_httptime a
} -constraints correctLocale -returnCodes error -result {expected integer but got "a"}

test ns_httptime-1.3 {basic syntax: wrong number of args} -body {
     ns_httptime 1 2
} -constraints correctLocale -returnCodes error -result {wrong # args: should be "ns_httptime time"}

test ns_httptime-2.1 {basic operation} -body {
     ns_httptime 0
} -constraints correctLocale -result {Thu, 01 Jan 1970 00:00:00 GMT}

test ns_httptime-2.2 {basic operation} -body {
     ns_httptime 1
} -constraints correctLocale -result {Thu, 01 Jan 1970 00:00:01 GMT}

test ns_httptime-2.3 {basic operation} -body {
     ns_httptime -1
} -constraints correctLocale -result {Wed, 31 Dec 1969 23:59:59 GMT}

test ns_httptime-2.4 {basic operation} -body {
     ns_httptime 1129794520
} -constraints correctLocale -result {Thu, 20 Oct 2005 07:48:40 GMT}

cleanupTests
